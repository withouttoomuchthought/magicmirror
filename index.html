<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>magicmirror ¬∑ the reflection portal</title>
    <meta name="description" content="type what's on your heart. the mirror listens, breathes with you, and softly reflects back what your heart was really trying to say.">
    <meta name="theme-color" content="#B8A8D8">
    <meta property="og:title" content="magicmirror ¬∑ the reflection portal">
    <meta property="og:description" content="type what's on your heart. the mirror reflects back what your heart was really trying to say.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://magicmirror.withouttoomuchthought.com">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Karla:wght@300;400;600&display=swap');

```
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    :root {
        --butter: #FDF2B3;
        --peach: #FAD4C0;
        --lilac: #D9D7F3;
        --sky: #C7E5F5;
        --sage: #D7CBB3;
        --gold: #E3C27D;
        --cream: #FAF9F6;
        --ink: #2F2F2F;
        --text: #5A5A5A;
        --glass: 255, 255, 255;
        --blur: 18px;
        --radius: 26px;
        --shadow: 0 20px 40px rgba(0,0,0,.12);
        --sky-deep: #1B2250;
        --sky-bright: #83BCD4;
        --sky-light: #B1DEE0;
        --lavender: #9389BD;
        --periwinkle: #CFCAD1;
        --background: #F8FAFB;
        --gradient-1: #B8A8D8;
        --gradient-2: #A8B8E8;
        --gradient-3: #B8A8E8;
        --gradient-4: #C8B8E8;
        --font-title: 'Playfair Display', serif;
        --font-body: 'Karla', -apple-system, BlinkMacSystemFont, sans-serif;
        --font-h1-mobile: 28px;
        --font-h2-mobile: 22px;
        --font-body-mobile: 16px;
        --font-h1-desktop: 40px;
        --font-h2-desktop: 32px;
        --font-body-desktop: 18px;
        --line-height-title: 1.2;
        --line-height-body: 1.6;
        --weight-regular: 400;
        --weight-medium: 500;
        --weight-semibold: 600;
        --space-xs: 8px;
        --space-sm: 16px;
        --space-md: 24px;
        --space-lg: 32px;
        --space-xl: 48px;
        --space-2xl: 64px;
        --radius-sm: 8px;
        --radius-md: 16px;
        --radius-lg: 24px;
        --radius-round: 50px;
        --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);
        --shadow-float: 0 8px 30px rgba(0, 0, 0, 0.12);
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        font-family: var(--font-body);
        font-size: var(--font-body-mobile);
        line-height: var(--line-height-body);
        color: var(--text);
        background: linear-gradient(135deg, var(--gradient-1) 0%, var(--gradient-2) 35%, var(--gradient-3) 65%, var(--gradient-4) 100%);
        background-size: 400% 400%;
        animation: gradientFlow 20s ease infinite;
        background-attachment: fixed;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        cursor: none;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }
    
    @media (min-width: 1024px) {
        body {
            font-size: var(--font-body-desktop);
        }
    }

    @media (hover: none) and (pointer: coarse) {
        body {
            cursor: auto !important;
        }
    }

    /* ========================================
       BACK TO WTMT BUTTON
    ======================================== */
    .back-btn {
        position: fixed;
        top: 16px;
        left: 16px;
        z-index: 110;
        padding: 8px 16px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.7);
        background: rgba(255,255,255,0.55);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        font-family: var(--font-body);
        font-size: 0.8rem;
        color: var(--ink);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        box-shadow: 0 4px 18px rgba(0,0,0,0.12);
        transition: all 0.2s ease;
    }

    .back-btn:hover {
        transform: translateY(-1px);
        background: rgba(255,255,255,0.8);
        box-shadow: 0 6px 22px rgba(0,0,0,0.16);
    }

    /* ========================================
       CUSTOM CURSOR
    ======================================== */
    .custom-cursor {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        position: fixed;
        pointer-events: none;
        z-index: 99999;
        box-shadow: 0 0 15px rgba(212, 197, 226, 0.6);
        transition: transform 0.15s ease;
        transform: translate(-50%, -50%);
    }

    .cursor-follower {
        width: 35px;
        height: 35px;
        border: 2px solid rgba(212, 197, 226, 0.4);
        border-radius: 50%;
        position: fixed;
        pointer-events: none;
        z-index: 99998;
        transition: transform 0.2s ease;
        transform: translate(-50%, -50%);
    }

    @media (hover: none) and (pointer: coarse) {
        .custom-cursor,
        .cursor-follower {
            display: none !important;
        }
    }

    /* ========================================
       AURORA LIGHT BEAMS
    ======================================== */
    .aurora-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
    }

    .aurora-beam {
        position: absolute;
        width: 300px;
        height: 200%;
        background: linear-gradient(90deg, 
            transparent 0%, 
            rgba(232, 214, 255, 0.15) 50%, 
            transparent 100%);
        filter: blur(40px);
        transform-origin: top center;
        animation: auroraMove 20s ease-in-out infinite;
    }

    .aurora-beam:nth-child(1) { left: 10%; animation-delay: 0s; }
    .aurora-beam:nth-child(2) { left: 30%; animation-delay: 4s; }
    .aurora-beam:nth-child(3) { left: 50%; animation-delay: 8s; }
    .aurora-beam:nth-child(4) { left: 70%; animation-delay: 12s; }
    .aurora-beam:nth-child(5) { left: 90%; animation-delay: 16s; }

    @keyframes auroraMove {
        0% {
            opacity: 0;
            transform: translateX(-100%) translateY(0) rotate(-15deg);
        }
        15% { opacity: 0.6; }
        85% { opacity: 0.6; }
        100% {
            opacity: 0;
            transform: translateX(100%) translateY(50vh) rotate(-15deg);
        }
    }

    /* ========================================
       RIPPLE CANVAS
    ======================================== */
    #rippleCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 2;
    }

    /* ========================================
       PARTICLE SYSTEM
    ======================================== */
    .particle-system {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 3;
        overflow: hidden;
    }

    .particle {
        position: absolute;
        border-radius: 50%;
        animation: floatParticle linear infinite;
        opacity: 0;
    }

    .particle.slow {
        width: 2px;
        height: 2px;
        background: rgba(255, 255, 255, 0.6);
        box-shadow: 0 0 3px rgba(255, 255, 255, 0.8);
    }

    .particle.fast {
        width: 3px;
        height: 3px;
        background: rgba(212, 197, 226, 0.7);
        box-shadow: 0 0 5px rgba(212, 197, 226, 0.9);
    }

    .particle.glow {
        width: 5px;
        height: 5px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(249, 228, 166, 0.5));
        box-shadow: 0 0 10px rgba(249, 228, 166, 0.8);
    }

    @keyframes floatParticle {
        0% {
            transform: translateY(100vh) translateX(0) scale(0) rotate(0deg);
            opacity: 0;
        }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% {
            transform: translateY(-100px) translateX(var(--particle-drift)) scale(1) rotate(360deg);
            opacity: 0;
        }
    }

    /* ========================================
       CLOUD SYSTEM
    ======================================== */
    .cloud-layer {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
    }

    .cloud-layer-back { z-index: 4; }
    .cloud-layer-mid { z-index: 5; }
    .cloud-layer-front { z-index: 6; }

    .parallax-cloud {
        position: absolute;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50% 40% 45% 55% / 55% 45% 50% 50%;
        filter: blur(25px);
        animation: driftParallax linear infinite;
        opacity: 0;
    }

    .quote-cloud {
        position: absolute;
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(15px);
        border-radius: var(--radius-lg);
        padding: var(--space-sm) var(--space-md);
        font-family: var(--font-body);
        font-size: 0.7em;
        font-style: italic;
        color: rgba(45, 55, 72, 0.35);
        line-height: var(--line-height-body);
        text-align: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
        animation: driftQuoteCloud linear infinite;
        opacity: 0;
        max-width: 200px;
    }

    @keyframes driftParallax {
        0% {
            transform: translateX(-10%) translateY(100vh) rotate(0deg);
            opacity: 0;
        }
        10% { opacity: var(--cloud-opacity); }
        90% { opacity: var(--cloud-opacity); }
        100% {
            transform: translateX(var(--cloud-drift)) translateY(-100px) rotate(var(--cloud-rotate));
            opacity: 0;
        }
    }

    @keyframes driftQuoteCloud {
        0% {
            transform: translateX(-5%) translateY(100vh) rotate(0deg) scale(0.9);
            opacity: 0;
        }
        10% { opacity: 0.6; }
        90% { opacity: 0.6; }
        100% {
            transform: translateX(var(--quote-drift)) translateY(-80px) rotate(var(--quote-rotate)) scale(1);
            opacity: 0;
        }
    }

    /* ========================================
       SPARKLE INTERVALS
    ======================================== */
    .sparkle-float {
        position: fixed;
        font-size: 12px;
        pointer-events: none;
        z-index: 7;
        animation: sparkleFloat 8s ease-in-out forwards;
    }

    @keyframes sparkleFloat {
        0%, 100% { 
            opacity: 0; 
            transform: translate(0, 0) rotate(0deg) scale(0.8); 
        }
        15% { opacity: 0.6; }
        50% { 
            opacity: 0.9; 
            transform: translate(50px, -70px) rotate(180deg) scale(1.3); 
        }
        85% { opacity: 0.5; }
    }

    /* ========================================
       WATERLINE (WTMT DETAIL)
    ======================================== */
    .mm-water {
        position: fixed;
        inset: auto 0 0 0;
        height: 28vh;
        pointer-events: none;
        z-index: 8;
        background:
            radial-gradient(60% 80% at 50% 0%, rgba(199, 229, 245, .35), transparent 70%),
            linear-gradient(0deg, rgba(250, 249, 246, .85), rgba(250, 249, 246, .0) 70%);
        mask-image: radial-gradient(120% 60% at 50% -10%, black 40%, transparent 70%);
        animation: tide 8s ease-in-out infinite;
    }

    @keyframes tide {
        0%, 100% { transform: translateY(2%); }
        50% { transform: translateY(-2%); }
    }

    /* ========================================
       MAIN ANIMATIONS
    ======================================== */
    @keyframes gradientFlow {
        0%, 100% { background-position: 0% 50%; }
        25% { background-position: 50% 100%; }
        50% { background-position: 100% 50%; }
        75% { background-position: 50% 0%; }
    }

    @keyframes holoShift {
        0%, 100% { background-position: 0% center; }
        50% { background-position: 200% center; }
    }

    @keyframes logoFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
    }

    @keyframes emojiRotate {
        0%, 100% {
            transform: scale(1) rotate(0deg);
        }
        50% {
            transform: scale(1.15) rotate(10deg);
        }
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes breathe {
        0%, 100% { transform: scale(1); opacity: 0.5; }
        50% { transform: scale(1.3); opacity: 0.8; }
    }

    @keyframes pulse {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 1; }
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
    }

    @keyframes gentleFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }

    /* ========================================
       LANDING PAGE
    ======================================== */
    .landing-page {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 30px;
        text-align: center;
        position: relative;
        z-index: 10;
    }

    .landing-icon {
        font-size: 5rem;
        margin-bottom: 30px;
        animation: gentleFloat 4s ease-in-out infinite;
        filter: drop-shadow(0 10px 30px rgba(217, 215, 243, 0.5));
    }

    .landing-title {
        font-family: var(--font-title);
        font-size: clamp(2.2rem, 7vw, 3.5rem);
        font-weight: var(--weight-semibold);
        margin-bottom: 15px;
        letter-spacing: -0.5px;
        background: linear-gradient(
            90deg,
            #F8F3FF 0%,
            #FFF8FA 15%,
            #F3FFFA 30%,
            #FFFCF8 45%,
            #FFF8FA 60%,
            #F8F3FF 75%,
            #FFFCF8 90%,
            #F8F3FF 100%
        );
        background-size: 300% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: holoShift 8s ease-in-out infinite;
        filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8));
    }

    .landing-subtitle {
        font-size: 1.15rem;
        color: rgba(255, 255, 255, 0.85);
        margin-bottom: 50px;
        font-style: italic;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .landing-card {
        background: rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 30px;
        padding: 50px 45px;
        max-width: 550px;
        width: 100%;
        box-shadow: var(--shadow-soft), 0 0 0 1px rgba(255, 255, 255, 0.4);
        margin-bottom: 40px;
    }

    .landing-section {
        margin-bottom: 35px;
    }

    .landing-section:last-child {
        margin-bottom: 0;
    }

    .landing-section h3 {
        font-family: var(--font-title);
        font-size: 1.3rem;
        font-weight: var(--weight-medium);
        color: rgba(255, 255, 255, 0.95);
        margin-bottom: 18px;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .landing-section p {
        font-size: 1.05rem;
        line-height: 1.9;
        color: rgba(255, 255, 255, 0.85);
        margin-bottom: 12px;
    }

    .landing-steps {
        text-align: left;
        padding-left: 10px;
    }

    .landing-step {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        margin-bottom: 16px;
        font-size: 1rem;
        line-height: 1.7;
        color: rgba(255, 255, 255, 0.85);
    }

    .step-number {
        background: rgba(255, 255, 255, 0.3);
        color: white;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.85rem;
        font-weight: 600;
        flex-shrink: 0;
        margin-top: 2px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .landing-poem {
        font-size: 1.15rem;
        font-style: italic;
        color: rgba(255, 255, 255, 0.8);
        line-height: 2;
        margin: 30px 0;
        padding: 22px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 18px;
        border-left: 3px solid rgba(255, 255, 255, 0.4);
    }

    .landing-features {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
    }

    .feature-tag {
        background: rgba(255, 255, 255, 0.25);
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.9);
    }

    .enter-btn {
        display: inline-block;
        padding: 18px 50px;
        background: rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.4);
        border-radius: 50px;
        color: white;
        font-family: var(--font-body);
        font-size: 1.1rem;
        font-weight: var(--weight-medium);
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        text-decoration: none;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .enter-btn:hover {
        transform: translateY(-3px);
        background: rgba(255, 255, 255, 0.5);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
    }

    .coming-soon {
        margin-top: 30px;
        font-size: 0.95rem;
        color: rgba(255, 255, 255, 0.7);
        font-style: italic;
    }

    .landing-disclaimer {
        max-width: 500px;
        margin: 0 auto 30px;
        padding: 20px 25px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.85);
        line-height: 1.7;
        text-align: center;
    }

    .landing-disclaimer p {
        margin-bottom: 10px;
    }

    .landing-disclaimer p:last-child {
        margin-bottom: 0;
    }

    .landing-disclaimer a {
        color: white;
        text-decoration: underline;
        text-underline-offset: 2px;
    }

    .landing-disclaimer a:hover {
        opacity: 0.8;
    }

    /* ========================================
       MIRROR APP SECTION
    ======================================== */
    .mirror-app {
        min-height: 100vh;
        padding: var(--space-md);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 10;
    }

    .container {
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        position: relative;
        z-index: 10;
        transition: transform 0.3s ease;
        transform-style: preserve-3d;
    }

    .view {
        display: none;
        animation: fadeIn 1s ease;
    }

    .view.active {
        display: block;
    }

    /* ========================================
       LOGO & HEADER
    ======================================== */
    .invitation-text {
        font-family: var(--font-body);
        font-size: 1.05em;
        line-height: var(--line-height-body);
        margin-bottom: var(--space-lg);
        text-align: center;
        color: rgba(255, 255, 255, 0.85);
        font-style: italic;
        animation: fadeIn 1.5s ease;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
    }

    .logo {
        font-family: var(--font-title);
        font-weight: var(--weight-semibold);
        text-transform: lowercase;
        letter-spacing: 1px;
        font-style: normal;
        margin-bottom: var(--space-sm);
        text-align: center;
        font-size: var(--font-h1-mobile);
        animation: logoFloat 4s ease-in-out infinite;
    }
    
    @media (min-width: 1024px) {
        .logo {
            font-size: var(--font-h1-desktop);
        }
    }

    .logo-text {
        background: linear-gradient(
            90deg,
            #F8F3FF 0%,
            #FFF8FA 15%,
            #F3FFFA 30%,
            #FFFCF8 45%,
            #FFF8FA 60%,
            #F8F3FF 75%,
            #FFFCF8 90%,
            #F8F3FF 100%
        );
        background-size: 300% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: holoShift 8s ease-in-out infinite;
        filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8))
                drop-shadow(0 0 50px rgba(229, 217, 242, 0.7))
                drop-shadow(0 0 70px rgba(200, 180, 255, 0.5));
    }

    .emoji {
        display: inline-block;
        margin-left: 8px;
        animation: emojiRotate 5s ease-in-out infinite;
        font-size: 1.2em;
        filter: drop-shadow(0 0 15px rgba(249, 228, 166, 0.8));
    }

    .tagline {
        font-family: var(--font-body);
        font-size: 1em;
        line-height: var(--line-height-body);
        margin-bottom: var(--space-xl);
        opacity: 0.9;
        text-align: center;
        color: rgba(255, 255, 255, 0.85);
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    /* ========================================
       GLASS CARD (SUBMISSION VIEW)
    ======================================== */
    .glass-card {
        background: rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border-radius: var(--radius-md);
        padding: var(--space-lg) var(--space-md);
        box-shadow: 
            var(--shadow-soft),
            0 0 0 1px rgba(255, 255, 255, 0.4);
        border: 2px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .glass-card:hover {
        transform: translateY(-2px);
        box-shadow: 
            0 15px 50px rgba(0, 0, 0, 0.1),
            0 0 0 1px rgba(255, 255, 255, 0.5);
    }

    /* ========================================
       FORM ELEMENTS
    ======================================== */
    textarea {
        width: 100%;
        min-height: 180px;
        padding: var(--space-md);
        border: none;
        border-radius: var(--radius-md);
        background: rgba(255, 255, 255, 0.5);
        font-family: var(--font-body);
        font-size: 1em;
        line-height: var(--line-height-body);
        color: var(--ink);
        resize: none;
        transition: all 0.3s ease;
    }

    textarea:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.7);
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);
    }

    textarea::placeholder {
        color: rgba(45, 55, 72, 0.45);
        font-style: italic;
    }

    .submit-btn {
        width: 100%;
        padding: var(--space-md);
        margin-top: var(--space-md);
        border: none;
        border-radius: var(--radius-round);
        background: linear-gradient(135deg, var(--butter) 0%, var(--gold) 100%);
        font-family: var(--font-body);
        font-size: 1.1em;
        font-weight: var(--weight-medium);
        color: var(--ink);
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(227, 194, 125, 0.3);
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(227, 194, 125, 0.4);
    }

    .submit-btn:active {
        transform: translateY(0);
    }

    .footer-note {
        font-family: var(--font-body);
        font-size: 0.9em;
        line-height: 1.8;
        text-align: center;
        color: rgba(255, 255, 255, 0.75);
        margin-top: var(--space-lg);
        font-style: italic;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
    }

    /* ========================================
       LOADING VIEW
    ======================================== */
    .breathing-circle {
        width: 80px;
        height: 80px;
        margin: var(--space-xl) auto var(--space-md);
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.5) 0%, rgba(212, 197, 226, 0.3) 100%);
        animation: breathe 3s ease-in-out infinite;
        box-shadow: 0 0 40px rgba(212, 197, 226, 0.4);
    }

    .loading-text {
        font-family: var(--font-body);
        font-size: 1em;
        text-align: center;
        color: rgba(255, 255, 255, 0.85);
        font-style: italic;
        margin-bottom: var(--space-md);
        animation: pulse 2s ease-in-out infinite;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    }

    .loading-emoji {
        text-align: center;
        font-size: 2em;
        animation: float 2s ease-in-out infinite;
    }

    /* ========================================
       RESULT VIEW
    ======================================== */
    .mm-card {
        max-width: 540px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.35);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: var(--shadow-float);
    }

    .mm-head {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: var(--space-md);
    }

    .mm-logo {
        width: 24px;
        height: 24px;
        background: radial-gradient(circle, rgba(255,255,255,0.9), rgba(212,197,226,0.6));
        border-radius: 50%;
        box-shadow: 0 0 15px rgba(212,197,226,0.5);
    }

    .mm-title {
        font-family: var(--font-title);
        font-size: 1.2em;
        font-weight: var(--weight-semibold);
        color: rgba(255, 255, 255, 0.95);
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .mm-whisper {
        font-size: 0.85em;
        color: rgba(255, 255, 255, 0.7);
        font-style: italic;
        margin-bottom: 8px;
        text-align: center;
    }

    .mm-user-input {
        font-size: 0.95em;
        color: rgba(255, 255, 255, 0.85);
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: var(--radius-md);
        margin-bottom: var(--space-md);
        font-style: italic;
        border-left: 3px solid rgba(255, 255, 255, 0.4);
    }

    .mm-mirror {
        background: rgba(255, 255, 255, 0.2);
        border-radius: var(--radius-md);
        padding: var(--space-md);
        margin-bottom: var(--space-md);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .mm-text {
        font-size: 1.1em;
        line-height: 1.8;
        color: var(--ink);
        font-style: italic;
        white-space: pre-wrap;
    }

    .mm-subtle {
        font-size: 0.75em;
        color: rgba(45, 55, 72, 0.5);
        font-style: italic;
        text-align: center;
        margin-top: var(--space-sm);
    }

    .mm-disclaimer {
        font-size: 0.72em;
        color: var(--text);
        opacity: 0.45;
        font-style: italic;
        text-align: center;
        margin-top: 0;
        margin-bottom: 16px;
        line-height: 1.4;
    }

    .mm-actions {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: var(--space-md);
    }

    .mm-btn {
        padding: 10px 20px;
        border-radius: var(--radius-round);
        border: 1px solid rgba(255, 255, 255, 0.5);
        background: rgba(255, 255, 255, 0.3);
        font-family: var(--font-body);
        font-size: 0.9em;
        color: var(--ink);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .mm-btn:hover {
        background: rgba(255, 255, 255, 0.5);
        transform: translateY(-1px);
    }

    .mm-action-btn {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
        padding: 14px 18px;
        margin-bottom: 10px;
        border-radius: var(--radius-md);
        border: 1px solid rgba(255, 255, 255, 0.4);
        background: rgba(255, 255, 255, 0.2);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: left;
    }

    .mm-action-btn:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: translateX(5px);
    }

    .action-icon {
        font-size: 1.4em;
    }

    .action-content {
        flex: 1;
    }

    .action-title {
        font-family: var(--font-body);
        font-size: 0.95em;
        font-weight: var(--weight-medium);
        color: var(--ink);
    }

    .action-desc {
        font-size: 0.8em;
        color: var(--text);
        opacity: 0.7;
    }

    .support-box {
        margin-top: 16px;
        padding: 16px;
        background: rgba(253, 242, 179, 0.1);
        border-radius: 16px;
        text-align: center;
        border: 1px solid rgba(253, 242, 179, 0.2);
    }

    .support-text {
        font-family: var(--font-body);
        font-size: 0.85em;
        color: var(--text);
        font-style: italic;
        margin-bottom: 12px;
        line-height: 1.4;
        opacity: 0.75;
    }

    .support-link {
        display: inline-block;
        padding: 8px 18px;
        background: linear-gradient(135deg, var(--butter) 0%, var(--gold) 100%);
        color: var(--ink);
        border-radius: 999px;
        text-decoration: none;
        font-family: var(--font-body);
        font-size: 0.85em;
        font-weight: var(--weight-medium);
        transition: all 0.2s ease;
        border: none;
        box-shadow: 0 2px 8px rgba(227, 194, 125, 0.2);
    }

    .support-link:hover {
        transform: translateY(-1px);
        box-shadow: 0 3px 12px rgba(227, 194, 125, 0.3);
    }

    .mm-try-again {
        width: 100%;
        padding: 14px;
        margin-top: 16px;
        border-radius: var(--radius-round);
        border: 2px solid rgba(255, 255, 255, 0.4);
        background: transparent;
        font-family: var(--font-body);
        font-size: 1em;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        transition: all 0.2s ease;
        font-weight: var(--weight-medium);
    }

    .mm-try-again:hover {
        opacity: 1;
        background: rgba(255, 255, 255, .15);
    }

    .bmac-button {
        position: fixed;
        bottom: var(--space-sm);
        left: var(--space-sm);
        background: rgba(255, 255, 255, 0.45);
        backdrop-filter: blur(20px);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-round);
        border: 2px solid rgba(249, 228, 166, 0.3);
        font-family: var(--font-body);
        font-size: 0.85em;
        color: var(--ink);
        text-decoration: none;
        font-style: italic;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(249, 228, 166, 0.2);
    }

    .bmac-button:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.65);
        box-shadow: 0 6px 20px rgba(249, 228, 166, 0.35);
    }

    .bmac-button .bmac-emoji {
        font-size: 1.2em;
        margin: 0;
    }

    .wtmt-link {
        position: fixed;
        bottom: var(--space-sm);
        right: var(--space-sm);
        font-family: var(--font-body);
        font-size: 0.75em;
        color: rgba(255, 255, 255, 0.75);
        text-decoration: none;
        font-style: italic;
        z-index: 100;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }

    @media (max-width: 600px) {
        .landing-page { padding: 40px 20px; }
        .landing-card { padding: 35px 25px; }
        .landing-icon { font-size: 4rem; }
    }

    @media (max-width: 480px) {
        .mirror-app { padding: var(--space-sm); }
        .logo { font-size: var(--font-h2-desktop); }
        .mm-card { padding: 20px; max-width: 100%; }
        textarea { min-height: 150px; font-size: 1em; }
        .mm-text { font-size: 16px; line-height: 1.65; }
        .mm-mirror { padding: 16px; }
        .mm-title { font-size: 16px; }
        .mm-logo { width: 20px; height: 20px; }
        .bmac-button {
            padding: 8px 12px;
            font-size: 0.75em;
        }
    }

    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
        
        .cloud-layer,
        .particle-system,
        .aurora-container,
        .mm-water {
            display: none;
        }
    }

    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }
</style>
```

</head>
<body>
    <!-- back to wtmt -->
    <a href="https://withouttoomuchthought.com" class="back-btn">
        <span>‚Üê</span><span>back to wtmt</span>
    </a>

```
<!-- Custom Cursor (desktop only) -->
<div class="custom-cursor"></div>
<div class="cursor-follower"></div>

<!-- Aurora Light Beams -->
<div class="aurora-container">
    <div class="aurora-beam"></div>
    <div class="aurora-beam"></div>
    <div class="aurora-beam"></div>
    <div class="aurora-beam"></div>
    <div class="aurora-beam"></div>
</div>

<!-- Ripple Canvas -->
<canvas id="rippleCanvas"></canvas>

<!-- Particle System -->
<div id="particleSystem" class="particle-system"></div>

<!-- Cloud Layers -->
<div id="cloudLayerBack" class="cloud-layer cloud-layer-back"></div>
<div id="cloudLayerMid" class="cloud-layer cloud-layer-mid"></div>
<div id="cloudLayerFront" class="cloud-layer cloud-layer-front"></div>

<!-- Waterline Detail -->
<div class="mm-water" aria-hidden="true"></div>

<!-- ========================================
     LANDING PAGE
======================================== -->
<section class="landing-page" id="landing">
    <div class="landing-icon">üîÆ</div>
    <h1 class="landing-title">magicmirror</h1>
    <p class="landing-subtitle">the reflection portal</p>

    <div class="landing-card">
        <div class="landing-section">
            <h3>‚ú® what is this?</h3>
            <p>
                a gentle space to pour out what's on your heart ‚Äî<br>
                and receive it back, transformed.
            </p>
            <p>
                it's not about fixing you.<br>
                it's about <em>seeing</em> you.
            </p>
        </div>

        <div class="landing-section">
            <h3>üåô how it works</h3>
            <div class="landing-steps">
                <div class="landing-step">
                    <span class="step-number">1</span>
                    <span>type what's on your heart ‚Äî something heavy, honest, or unspoken</span>
                </div>
                <div class="landing-step">
                    <span class="step-number">2</span>
                    <span>press <strong>transform</strong> and let the mirror hold your words</span>
                </div>
                <div class="landing-step">
                    <span class="step-number">3</span>
                    <span>receive a soft reflection ‚Äî what your heart was really trying to say</span>
                </div>
            </div>
        </div>

        <div class="landing-poem">
            the world outside moves fast.<br>
            but here... truth slows down<br>
            long enough to be held. üåô
        </div>

        <div class="landing-section">
            <h3>üí´ you can...</h3>
            <div class="landing-features">
                <span class="feature-tag">save your reflection</span>
                <span class="feature-tag">copy it</span>
                <span class="feature-tag">share it</span>
                <span class="feature-tag">download as art</span>
            </div>
        </div>
    </div>

    <div class="landing-disclaimer">
            <p>
                ü§ç magicmirror uses ai to create reflections. it's a creative tool ‚Äî not therapy or professional advice. by continuing, you agree to our <a href="safety.html">safety & privacy</a> info.
            </p>
            <p>
                if you're in crisis, please reach out to <a href="tel:988">988</a> or a mental health professional.
            </p>
        </div>

    <a href="#mirror" class="enter-btn">step through the mirror ü™û</a>

    <p class="coming-soon">üí´ coming soon: memory mirror ¬∑ color this truth</p>
</section>

<!-- ========================================
     MIRROR APP
======================================== -->
<section class="mirror-app" id="mirror">
    <div class="container" id="mainContainer">
        
        <!-- Submission View -->
        <div id="submissionView" class="view active">
            <div class="invitation-text">
                close your eyes, take a breath.<br>
                now ‚Äî tell the mirror what's real.
            </div>
            <div class="logo">
                <span class="logo-text">magicmirror</span><span class="emoji">ü™û‚ú®</span>
            </div>
            <p class="tagline">
                your truth, transformed withouttoomuchthought.
            </p>

            <div class="glass-card">
                <textarea id="userInput" placeholder="what's on your heart?" maxlength="500"></textarea>
                <button class="submit-btn" onclick="submitThought()">
                    transform ü™û‚ú®
                </button>
            </div>

            <p class="footer-note">
                write what's true.<br>
                messy. honest. unfiltered.
            </p>
        </div>

        <!-- Loading View -->
        <div id="loadingView" class="view">
            <div class="breathing-circle"></div>
            <p class="loading-text">holding your words gently...</p>
            <div class="loading-emoji">ü™û‚ú®</div>
        </div>

        <!-- Result View -->
        <div id="resultView" class="view">
            <article class="mm-card" role="region" aria-labelledby="mm-title">
                <header class="mm-head">
                    <span class="mm-logo" aria-hidden="true"></span>
                    <h2 class="mm-title" id="mm-title">magicmirror</h2>
                </header>

                <div class="mm-whisper">you wrote:</div>
                <div class="mm-user-input" id="userInputDisplay"></div>

                <section class="mm-mirror" id="mm-mirror">
                    <div class="sr-only" aria-live="polite" id="mm-live"></div>
                    <div class="mm-text" id="transformedText"></div>
                    <p class="mm-subtle" id="mm-subtle">a soft reflection by wtmt ¬∑ just now</p>
                </section>

                <p class="mm-disclaimer">
                    these reflections come from ai. take what resonates, leave what doesn't. trust your own truth first üíõ
                </p>

                <footer class="mm-actions">
                    <button class="mm-btn" id="copyBtn">copy</button>
                </footer>

                <button class="mm-action-btn" onclick="shareToSocial()">
                    <div class="action-icon">üå∏</div>
                    <div class="action-content">
                        <div class="action-title">share your truth</div>
                        <div class="action-desc">tiktok story, instagram, anywhere you want</div>
                    </div>
                </button>

                <button class="mm-action-btn" onclick="downloadArt()">
                    <div class="action-icon">üé®</div>
                    <div class="action-content">
                        <div class="action-title">download as art</div>
                        <div class="action-desc">save this as a beautiful reminder</div>
                    </div>
                </button>

                <div class="support-box">
                    <p class="support-text">
                        if this reflection held something for you,<br>
                        you can help keep this space free üïØÔ∏è
                    </p>
                    <a href="https://buymeacoffee.com/withouttoomuchthought" target="_blank" class="support-link">
                        leave a little light ‚ú®
                    </a>
                </div>

                <button class="mm-try-again" onclick="tryAgain()">
                    share another truth ü™û
                </button>
            </article>
        </div>

    </div>
</section>

<!-- Buy Me a Coffee - Floating Button -->
<a href="https://buymeacoffee.com/withouttoomuchthought" class="bmac-button" target="_blank">
    <span class="bmac-emoji">‚òïÔ∏è</span>
    <span>support this space</span>
</a>

<a href="https://www.withouttoomuchthought.com" class="wtmt-link">withouttoomuchthought.com</a>

<script>
    const WEBHOOK_URL = 'https://magicmirror.withouttoomuchthought.workers.dev/';
    const DEBUG = new URLSearchParams(window.location.search).get('debug') === 'true';
    function log(...args) { if (DEBUG) console.log('[magicmirror]', ...args); }

    function setTimeBasedGradient() {
        const hour = new Date().getHours();
        const root = document.documentElement;
        
        if (hour >= 6 && hour < 12) {
            root.style.setProperty('--gradient-1', '#C8B8E8');
            root.style.setProperty('--gradient-2', '#B8C8F8');
            root.style.setProperty('--gradient-3', '#C8B8F8');
            root.style.setProperty('--gradient-4', '#D8C8F8');
        } else if (hour >= 12 && hour < 18) {
            root.style.setProperty('--gradient-1', '#B8A8D8');
            root.style.setProperty('--gradient-2', '#A8B8E8');
            root.style.setProperty('--gradient-3', '#B8A8E8');
            root.style.setProperty('--gradient-4', '#C8B8E8');
        } else if (hour >= 18 && hour < 22) {
            root.style.setProperty('--gradient-1', '#A898C8');
            root.style.setProperty('--gradient-2', '#9888B8');
            root.style.setProperty('--gradient-3', '#A898D8');
            root.style.setProperty('--gradient-4', '#B8A8D8');
        } else {
            root.style.setProperty('--gradient-1', '#8878A8');
            root.style.setProperty('--gradient-2', '#7868A8');
            root.style.setProperty('--gradient-3', '#8878B8');
            root.style.setProperty('--gradient-4', '#9888B8');
        }
    }
    setTimeBasedGradient();
    setInterval(setTimeBasedGradient, 3600000);

    // Custom Cursor
    const cursor = document.querySelector('.custom-cursor');
    const cursorFollower = document.querySelector('.cursor-follower');
    let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0, followerX = 0, followerY = 0;
    
    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
    });
    
    function animateCursor() {
        cursorX += (mouseX - cursorX) * 0.2;
        cursorY += (mouseY - cursorY) * 0.2;
        cursor.style.left = cursorX + 'px';
        cursor.style.top = cursorY + 'px';
        
        followerX += (mouseX - followerX) * 0.1;
        followerY += (mouseY - followerY) * 0.1;
        cursorFollower.style.left = followerX + 'px';
        cursorFollower.style.top = followerY + 'px';
        
        requestAnimationFrame(animateCursor);
    }
    animateCursor();

    // Ripple Effect
    const rippleCanvas = document.getElementById('rippleCanvas');
    const rippleCtx = rippleCanvas.getContext('2d');
    let ripples = [];
    
    function resizeRippleCanvas() {
        rippleCanvas.width = window.innerWidth;
        rippleCanvas.height = window.innerHeight;
    }
    resizeRippleCanvas();
    window.addEventListener('resize', resizeRippleCanvas);
    
    document.addEventListener('click', (e) => {
        ripples.push({
            x: e.clientX,
            y: e.clientY,
            radius: 0,
            maxRadius: 150,
            alpha: 1
        });
    });
    
    function animateRipples() {
        rippleCtx.clearRect(0, 0, rippleCanvas.width, rippleCanvas.height);
        ripples = ripples.filter(ripple => {
            ripple.radius += 3;
            ripple.alpha -= 0.015;
            if (ripple.alpha <= 0) return false;
            rippleCtx.beginPath();
            rippleCtx.arc(ripple.x, ripple.y, ripple.radius, 0, Math.PI * 2);
            rippleCtx.strokeStyle = `rgba(212, 197, 226, ${ripple.alpha * 0.5})`;
            rippleCtx.lineWidth = 2;
            rippleCtx.stroke();
            return true;
        });
        requestAnimationFrame(animateRipples);
    }
    animateRipples();

    // Particle System
    function createParticles() {
        const particleSystem = document.getElementById('particleSystem');
        for (let i = 0; i < 15; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle slow';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (12 + Math.random() * 10) + 's';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.setProperty('--particle-drift', (Math.random() - 0.5) * 80 + 'px');
            particleSystem.appendChild(particle);
        }
        for (let i = 0; i < 12; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle fast';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (8 + Math.random() * 6) + 's';
            particle.style.animationDelay = Math.random() * 10 + 's';
            particle.style.setProperty('--particle-drift', (Math.random() - 0.5) * 100 + 'px');
            particleSystem.appendChild(particle);
        }
        for (let i = 0; i < 8; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle glow';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (10 + Math.random() * 8) + 's';
            particle.style.animationDelay = Math.random() * 12 + 's';
            particle.style.setProperty('--particle-drift', (Math.random() - 0.5) * 120 + 'px');
            particleSystem.appendChild(particle);
        }
    }

    // Healing Quotes
    const healingQuotes = [
        "you're not too much.\nmaybe the world was too little.",
        "you don't have to earn\nrest or softness.",
        "maybe you weren't overreacting‚Ä¶\nmaybe it really did hurt.",
        "healing isn't about becoming new.\nit's about remembering you.",
        "you were never behind.\nyou were just on your own timeline.",
        "it's okay if you're not okay.\nthat's still a version of you worth loving.",
        "you don't have to hold it all\ntogether to be worthy of love.",
        "maybe the bravest thing is\nstaying when you want to run.",
        "your softness is not a flaw.\nit's the reason you notice the magic.",
        "there is nothing wrong with you\nfor needing more.",
        "you've survived every hard day\nup until today.\nthat counts for something.",
        "it's okay to not be okay\nright now...",
        "being seen doesn't require\nbeing perfect...",
        "maybe it's time to be soft...\nwhen you're tired...",
        "this is exactly where\nyou need to be...",
        "you don't have to be strong\nto be worthy...",
        "your journey\nis uniquely yours..."
    ];
    
    function createCloudLayers() {
        const layers = [
            { 
                container: document.getElementById('cloudLayerBack'), 
                count: 8, 
                speedRange: [35, 45], 
                sizeRange: [80, 120], 
                opacity: 0.3 
            },
            { 
                container: document.getElementById('cloudLayerMid'), 
                count: 6, 
                speedRange: [25, 35], 
                sizeRange: [100, 150], 
                opacity: 0.5 
            },
            { 
                container: document.getElementById('cloudLayerFront'), 
                count: 5, 
                speedRange: [15, 25], 
                sizeRange: [120, 180], 
                opacity: 0.7 
            }
        ];
        layers.forEach(layer => {
            for (let i = 0; i < layer.count; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'parallax-cloud';
                const leftPos = Math.random() * 95;
                const duration = layer.speedRange[0] + Math.random() * (layer.speedRange[1] - layer.speedRange[0]);
                const delay = Math.random() * 30;
                const size = layer.sizeRange[0] + Math.random() * (layer.sizeRange[1] - layer.sizeRange[0]);
                const drift = (Math.random() - 0.3) * 120;
                const rotate = (Math.random() - 0.5) * 15;
                cloud.style.left = leftPos + '%';
                cloud.style.width = size + 'px';
                cloud.style.height = (size * 0.6) + 'px';
                cloud.style.animationDuration = duration + 's';
                cloud.style.animationDelay = delay + 's';
                cloud.style.setProperty('--cloud-opacity', layer.opacity);
                cloud.style.setProperty('--cloud-drift', drift + '%');
                cloud.style.setProperty('--cloud-rotate', rotate + 'deg');
                layer.container.appendChild(cloud);
            }
        });
    }
    
    function createQuoteClouds() {
        const frontLayer = document.getElementById('cloudLayerFront');
        for (let i = 0; i < 8; i++) {
            const cloud = document.createElement('div');
            cloud.className = 'quote-cloud';
            cloud.textContent = healingQuotes[Math.floor(Math.random() * healingQuotes.length)];
            const leftPos = Math.random() * 95;
            const duration = 20 + Math.random() * 15;
            const delay = Math.random() * 25;
            const drift = (Math.random() - 0.4) * 130;
            const rotate = (Math.random() - 0.5) * 18;
            cloud.style.left = leftPos + '%';
            cloud.style.animationDuration = duration + 's';
            cloud.style.animationDelay = delay + 's';
            cloud.style.setProperty('--quote-drift', drift + '%');
            cloud.style.setProperty('--quote-rotate', rotate + 'deg');
            frontLayer.appendChild(cloud);
        }
    }

    function addSparkle() {
        if (Math.random() > 0.4) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle-float';
            sparkle.textContent = Math.random() > 0.5 ? '‚ú®' : 'üí´';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.top = Math.random() * 100 + '%';
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 8000);
        }
    }
    setInterval(addSparkle, 3500);

    function createCelebrationBurst() {
        const particleSystem = document.getElementById('particleSystem');
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle glow';
            const centerX = 50;
            const angle = (360 / 30) * i;
            const distance = 5 + Math.random() * 15;
            const leftPos = centerX + Math.cos(angle * Math.PI / 180) * distance;
            const duration = 2 + Math.random() * 2;
            const drift = (Math.random() - 0.5) * 200;
            particle.style.left = leftPos + '%';
            particle.style.bottom = '50%';
            particle.style.animationDuration = duration + 's';
            particle.style.animationDelay = '0s';
            particle.style.setProperty('--particle-drift', drift + 'px');
            particleSystem.appendChild(particle);
            setTimeout(() => particle.remove(), duration * 1000);
        }
    }

    createParticles();
    createCloudLayers();
    createQuoteClouds();

    function toast(msg) {
        const t = document.createElement('div');
        t.textContent = msg;
        Object.assign(t.style, {
            position: 'fixed',
            left: '50%',
            bottom: '24px',
            transform: 'translateX(-50%)',
            padding: '10px 14px',
            borderRadius: '999px',
            background: 'rgba(255,255,255,.95)',
            border: '1px solid rgba(255,255,255,.9)',
            boxShadow: '0 8px 20px rgba(0,0,0,.12)',
            fontFamily: 'Karla, system-ui',
            color: '#2F2F2F',
            zIndex: 9999,
            transition: 'opacity .3s ease'
        });
        document.body.appendChild(t);
        setTimeout(() => {
            t.style.opacity = '0';
            setTimeout(() => t.remove(), 300);
        }, 1200);
    }

    document.getElementById('copyBtn').addEventListener('click', async () => {
        const textOnly = document.getElementById('transformedText').innerText.trim();
        try {
            await navigator.clipboard.writeText(textOnly);
            toast('copied to clipboard');
        } catch (e) {
            toast('copy not available');
        }
    });

    let currentUserInput = '';

    const loadingMessages = [
        "holding your words gently...",
        "breathing with your truth...",
        "finding the light in your words...",
        "letting the mirror listen...",
        "transforming with care..."
    ];
    let loadingMsgIndex = 0;
    let loadingInterval;

    function showSequentialLoading() {
        const loadingText = document.querySelector('.loading-text');
        loadingMsgIndex = 0;
        loadingText.textContent = loadingMessages[0];
        loadingInterval = setInterval(() => {
            loadingMsgIndex = (loadingMsgIndex + 1) % loadingMessages.length;
            loadingText.textContent = loadingMessages[loadingMsgIndex];
        }, 2500);
    }

    function hideSequentialLoading() {
        if (loadingInterval) {
            clearInterval(loadingInterval);
            loadingInterval = null;
        }
    }

    async function submitThought() {
        const input = document.getElementById('userInput').value.trim();
        if (!input) {
            alert('share something first, love üíõ');
            return;
        }

        currentUserInput = input;
        document.getElementById('submissionView').classList.remove('active');
        document.getElementById('loadingView').classList.add('active');
        showSequentialLoading();
        
        try {
            const response = await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    original_text: input,
                    user_ip: 'browser'
                })
            });
            
            const data = await response.json();
            hideSequentialLoading();
            document.getElementById('loadingView').classList.remove('active');

            if (data.error) {
                alert(data.message);
                document.getElementById('submissionView').classList.add('active');
                return;
            }
            if (!data.success || !data.transformed) {
                throw new Error('Invalid response format from server');
            }
            
            document.getElementById('userInputDisplay').innerText = `"${currentUserInput}"`;
            document.getElementById('transformedText').innerText = data.transformed;
            document.getElementById('mm-live').textContent = 'new magicmirror reflection ready';
            document.getElementById('resultView').classList.add('active');
            createCelebrationBurst();
            document.getElementById('mirror').scrollIntoView({ behavior: 'smooth' });

        } catch (error) {
            console.error('Error:', error);
            hideSequentialLoading();
            document.getElementById('loadingView').classList.remove('active');
            alert('something went wrong. please try again üíõ');
            document.getElementById('submissionView').classList.add('active');
        }
    }

    async function shareToSocial() {
        const canvas = createStoryCanvas();
        canvas.toBlob(async (blob) => {
            if (navigator.share && navigator.canShare) {
                try {
                    const file = new File([blob], 'magicmirror-truth.png', { type: 'image/png' });
                    if (navigator.canShare({ files: [file] })) {
                        await navigator.share({
                            files: [file],
                            title: 'my truth, transformed',
                            text: 'shared from magicmirror ü™û‚ú®'
                        });
                        setTimeout(() => {
                            alert('üå∏ sharing complete!\n\nif you chose tiktok, tap "story" to share üíõ');
                        }, 300);
                        return;
                    }
                } catch (error) {
                    log('Share cancelled or failed:', error);
                }
            }
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `magicmirror-${Date.now()}.png`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            setTimeout(() => {
                alert('üíõ image saved!\n\nopen tiktok ‚Üí tap + ‚Üí upload ‚Üí select image ‚Üí story\n\nshare your truth ü™û‚ú®');
            }, 100);
        }, 'image/png', 0.95);
    }

    function downloadArt() {
        const canvas = createStoryCanvas();
        canvas.toBlob((blob) => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `magicmirror-${Date.now()}.png`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            setTimeout(() => {
                alert('üé® your reflection has been saved!\n\nshare it if it speaks to you üíõ');
            }, 100);
        }, 'image/png', 0.95);
    }

    function createStoryCanvas() {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 1080;
        canvas.height = 1920;
        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        gradient.addColorStop(0, '#B8A8D8');
        gradient.addColorStop(0.25, '#A8B8E8');
        gradient.addColorStop(0.5, '#B8A8E8');
        gradient.addColorStop(0.75, '#C8B8E8');
        gradient.addColorStop(1, '#B8A8D8');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.globalAlpha = 0.03;
        for (let i = 0; i < canvas.width; i += 3) {
            ctx.strokeStyle = '#fff';
            ctx.beginPath();
            ctx.moveTo(i, 0);
            ctx.lineTo(i, canvas.height);
            ctx.stroke();
        }
        ctx.globalAlpha = 1;
        const margin = 100;
        const cardPadding = 60;
        const cardX = margin;
        const cardY = margin + 80;
        const cardWidth = canvas.width - (margin * 2);
        const cardHeight = canvas.height - (margin * 2) - 160;
        ctx.shadowColor = 'rgba(0, 0, 0, 0.15)';
        ctx.shadowBlur = 40;
        ctx.shadowOffsetY = 20;
        ctx.fillStyle = 'rgba(255, 255, 255, 0.45)';
        ctx.beginPath();
        ctx.roundRect(cardX, cardY, cardWidth, cardHeight, 30);
        ctx.fill();
        ctx.shadowColor = 'transparent';
        const transformedText = document.getElementById('transformedText').innerText;
        const lines = transformedText.split('\n').filter(line => line.trim());
        ctx.fillStyle = '#2F2F2F';
        ctx.font = 'italic 38px Karla, -apple-system, sans-serif';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'top';
        function wrapText(lines, x, y, maxWidth, lineHeight) {
            let currentY = y;
            lines.forEach((line) => {
                const words = line.split(' ');
                let currentLine = '';
                words.forEach((word) => {
                    const testLine = currentLine + word + ' ';
                    const metrics = ctx.measureText(testLine);
                    if (metrics.width > maxWidth && currentLine !== '') {
                        ctx.fillText(currentLine.trim(), x, currentY);
                        currentLine = word + ' ';
                        currentY += lineHeight;
                    } else {
                        currentLine = testLine;
                    }
                });
                ctx.fillText(currentLine.trim(), x, currentY);
                currentY += lineHeight;
            });
            return currentY;
        }
        const textX = cardX + cardPadding;
        const textY = cardY + cardPadding;
        const textMaxWidth = cardWidth - (cardPadding * 2);
        const lineHeight = 52;
        wrapText(lines, textX, textY, textMaxWidth, lineHeight);
        ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(cardX + 80, cardY + cardHeight - 120);
        ctx.lineTo(cardX + cardWidth - 80, cardY + cardHeight - 120);
        ctx.stroke();
        ctx.textAlign = 'center';
        ctx.font = '24px Karla, -apple-system, sans-serif';
        ctx.fillStyle = 'rgba(47, 47, 47, 0.65)';
        ctx.fillText('transformed with love by magicmirror ü™û‚ú®', 
            canvas.width / 2, cardY + cardHeight - 80);
        ctx.font = '20px Karla, -apple-system, sans-serif';
        ctx.fillStyle = 'rgba(47, 47, 47, 0.55)';
        ctx.fillText('@withouttoomuchthought', 
            canvas.width / 2, cardY + cardHeight - 45);
        return canvas;
    }

    function tryAgain() {
        document.getElementById('resultView').classList.remove('active');
        document.getElementById('submissionView').classList.add('active');
        document.getElementById('userInput').value = '';
        currentUserInput = '';
        document.getElementById('mirror').scrollIntoView({ behavior: 'smooth' });
    }

    document.getElementById('userInput').addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            submitThought();
        }
    });

    // Smooth scroll for enter button
    document.querySelector('.enter-btn').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('mirror').scrollIntoView({ behavior: 'smooth' });
    });

    console.log('%cü™û magicmirror', 'font-size: 14px; color: #5A5A5A;');
    console.log('%ca soft reflection portal by wtmt', 'font-size: 12px; color: #888; font-style: italic;');
</script>
```

</body>
</html>